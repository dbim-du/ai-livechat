# DBIM-AI æ™ºèƒ½å®¢æœç³»ç»Ÿ (LiveChat + Dify) 
## ğŸŒŸ ç³»ç»Ÿæ¦‚è¿°

DBIM-AI æ™ºèƒ½å®¢æœ ç»“åˆ LiveChat çš„å®æ—¶æ²Ÿé€šèƒ½åŠ›ä¸ Dify çš„ AI å¤„ç†å¼•æ“ï¼Œæ„å»ºäº†ä¸€ä¸ªæ™ºèƒ½é«˜æ•ˆçš„å®¢æˆ·æœåŠ¡è§£å†³æ–¹æ¡ˆã€‚ç³»ç»Ÿèƒ½å¤Ÿè‡ªåŠ¨ç†è§£å®¢æˆ·é—®é¢˜ï¼Œå¤„ç†å¸¸è§æŸ¥è¯¢å¹¶å‡è½»å®¢æœå·¥ä½œé‡ï¼Œç¡®ä¿å®¢æˆ·è·å¾—å³æ—¶å‡†ç¡®çš„å›ç­”ã€‚å¹¶åœ¨å¿…è¦æ—¶æ— ç¼è½¬æ¥äººå·¥å®¢æœã€‚

## ğŸ§© å•†ä¸šç‰ˆ/å…è´¹ç‰ˆ

ä½¿ç”¨å†…ç½®ç§¯åˆ† å…è´¹ç‰ˆå¯å‡çº§å•†ä¸šç‰ˆï¼Œå•†ä¸šç‰ˆæ— åŠŸèƒ½é™åˆ¶ï¼Œåå°å¯è®¾ç½®è‡ªå®šä¹‰å‡çº§æ‰€éœ€ç§¯åˆ†æ¶ˆè€—å’Œç‰ˆæœ¬è¯´æ˜ã€‚

<img src="README.assets/image-20250829151731577.png" alt="image-20250829151731577" style="zoom: 33%; float: left;" /><img src="README.assets/image-20250829150649174.png" alt="image-20250829150649174" style="zoom: 33%; float: left;" />



<img src="README.assets/image-20250829151623921.png" alt="image-20250829151623921" style="zoom: 50%; float: left;" /><img src="README.assets/image-20250829151352552.png" alt="image-20250829151352552" style="zoom: 50%; float: left;" />





<img src="README.assets/image-20250829155256806.png" alt="image-20250829155256806" style="zoom:80%;" />

### ğŸ’¬ å…¨æ¸ é“æ”¯æŒå°

DBIM-AI æ™ºèƒ½å®¢æœ å°†æ‰€æœ‰å®¢æˆ·å¯¹è¯é›†ä¸­åˆ°ä¸€ä¸ªå¼ºå¤§çš„ Bot ServeræœåŠ¡ä¸­ï¼Œæ”¯æŒ ç”¨æˆ·è‡ªå®šä¹‰å®¢æœåç§°ã€å¤´åƒã€æ£€ç´¢å›å¤å…³é”®è¯ç­‰æ‰€æœ‰è‡ªå®šä¹‰å±æ€§ã€‚å®ƒæ”¯æŒåœ¨æ‚¨çš„Webç½‘ç«™ã€wapç§»åŠ¨ç«¯ã€APPç§»åŠ¨ç«¯ç­‰å¤šç§æ–¹å¼å¼•å…¥å®¢æœèŠå¤©å¯¹è¯æ¡†ã€è‡ªå®šä¹‰èŠå¤©å¯¹è¯æ¡†ã€APIæœåŠ¡è°ƒç”¨ç­‰è¿›è¡Œå®æ—¶èŠå¤©ã€‚

### ğŸ“š æ¥å…¥ä¸­å¿ƒæŒ‡å—

é€šè¿‡ç³»ç»Ÿæä¾›çš„ æ¥å…¥æŒ‡å— æ–‡æ¡£ï¼ŒæŒ‡å¯¼ç”¨æˆ·åœ¨ä¸åŒä½¿ç”¨åœºæ™¯ è½»æ¾æ¥å…¥DBIM-AIæ™ºèƒ½å®¢æœï¼Œè®©å®¢æœåœ¨ä¸åŒä½¿ç”¨åœºæ™¯ï¼Œæ›´ä¾¿æ·çš„å¾—åˆ°æ™ºèƒ½å®¢æœçš„å’¨è¯¢å¸®åŠ©æœåŠ¡ã€‚

## ğŸ“‹ æ ¸å¿ƒåŠŸèƒ½ä¸æŠ€æœ¯æ¶æ„

| åŠŸèƒ½æ¨¡å—             | åŠŸèƒ½æè¿°                                                     | ä¾èµ–ç»„ä»¶        |
| -------------------- | ------------------------------------------------------------ | --------------- |
| å®æ—¶èŠå¤©äº¤äº’         | æ”¯æŒæ–‡å­—ã€å›¾ç‰‡ã€æ–‡ä»¶ä¼ è¾“ï¼Œå®¢æˆ·æ— éœ€ä¸‹è½½ APP å³å¯é€šè¿‡ç½‘é¡µ / APIå‘èµ·å’¨è¯¢ | LiveChat        |
| AI æ™ºèƒ½åº”ç­”          | åŸºäº ä¼ä¸šçŸ¥è¯†åº“+è”ç½‘æœç´¢ è‡ªåŠ¨å›ç­”å¸¸è§é—®é¢˜ï¼Œæ”¯æŒå¤šè½®å¯¹è¯      | Dify + çŸ¥è¯†åº“   |
| è½¬æ¥äººå·¥å®¢æœæ— ç¼è¡”æ¥ | AIå®¢æœ æ— æ³•è·å–åˆ°ç²¾å‡†è§£ç­”æ—¶ï¼Œç”¨æˆ·å¯é€‰æ‹©è½¬æ¥äººå·¥å®¢æœï¼Œäººå·¥å®¢æœå°†ä¸ºç”¨æˆ·æä¾›æ›´å¥½çš„æœåŠ¡å’Œç²¾å‡†çš„å›ç­” | LiveChat + Dify |
| å®¢æˆ·æ„å›¾è¯†åˆ«         | è‡ªåŠ¨è¯†åˆ«å®¢æˆ·å’¨è¯¢æ„å›¾ï¼ˆå¦‚ â€œäº§å“è¯¦ç»†â€ï¼Œâ€œä½¿ç”¨è¯´æ˜ä¹¦â€ç­‰ï¼‰ï¼ŒAI å®¢æœ è‡ªåŠ¨æ£€ç´¢çŸ¥è¯†åº“ + è”ç½‘æœç´¢ + LLM ç»„ç»‡è§£ç­”è¯æœ¯ | Dify + LLM      |
| å¤šæ¸ é“ç»Ÿä¸€ç®¡ç†       | æ•´åˆç½‘é¡µã€APPã€WAPç­‰æ¸ é“å’¨è¯¢ï¼Œç»Ÿä¸€åœ¨ LiveChat åå°å¤„ç†       | LiveChat        |
| æ•°æ®åˆ†æä¸æŠ¥è¡¨       | è¾“å‡ºå’¨è¯¢é‡ã€AI è§£å†³ç‡ã€å®¢æˆ·æ»¡æ„åº¦ç­‰æ•°æ®æŠ¥è¡¨ï¼Œæ”¯æŒå‘¨ / æœˆç»´åº¦å¯¼å‡º | Dify æ•°æ®åˆ†æ   |

## ğŸ›  å®‰è£…éƒ¨ç½²

å‰ç½®è¦æ±‚ï¼š

â€‹	1ã€docker å®¹å™¨

â€‹	2ã€postgresql æ•°æ®åº“

â€‹	3ã€mysql æ•°æ®åº“

â€‹	4ã€å ¡å¡”ï¼ˆä¾¿äºç®¡ç†ã€éƒ¨ç½²åŠç¯å¢ƒå®‰è£…ï¼‰

â€‹	5ã€php-7.2.33 åŠ phpæ‰©å±•ï¼š1ã€pgsqlï¼Œ2ã€pdo_pgsql 

éƒ¨ç½²æ­¥éª¤ï¼š

â€‹	1ã€å®‰è£… PostgreSQL åŠ uuid-ossp ç»„ä»¶

		# 1ã€å®‰è£… psql:
		# æ›´æ–°å®‰è£…åŒ…åˆ—è¡¨	
		sudo apt update
		
		# å®‰è£… PostgreSQL åŠ é™„åŠ ç»„ä»¶åº“ï¼ˆåŒ…å« uuid-osspï¼‰
		sudo apt install postgresql postgresql-contrib postgresql-client
		
		# æ£€æŸ¥æœåŠ¡çŠ¶æ€
		sudo systemctl status postgresql
		
		# æŸ¥çœ‹postgresqlç‰ˆæœ¬
		sudo -u postgres psql -c "SELECT version();"
		
		# åˆ—å‡ºæ‰€æœ‰å¯ç”¨æ‰©å±•
		sudo -u postgres psql -c "SELECT * FROM pg_available_extensions WHERE name='uuid-ossp';"
		
		# 2ã€å¯åŠ¨å¹¶æ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼š
		# å¯åŠ¨æœåŠ¡
		sudo systemctl start postgresql
		
		# è®¾ç½®å¼€æœºå¯åŠ¨
		sudo systemctl enable postgresql
		
		# æ£€æŸ¥çŠ¶æ€
		sudo systemctl status postgresql
		
		# 3ã€å®‰è£… uuid-ossp æ‰©å±•ï¼š
		# åˆ‡æ¢åˆ° postgres ç”¨æˆ·
		sudo -i -u postgres
		
		# è¿›å…¥ PostgreSQL äº¤äº’ç»ˆç«¯
		psql
		
		# 4ã€æµ‹è¯•è°ƒç”¨ uuid-ossp æ‰©å±•ç»„ä»¶ï¼š
		# åˆ›å»ºæ‰©å±•
		CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
		
		# éªŒè¯å®‰è£…ï¼Œæµ‹è¯•ç”ŸæˆUUID
		SELECT uuid_generate_v4();
		
		# 5ã€å¦‚ä½•è®¾ç½® PostgreSQL åˆå§‹å¯†ç 
		# ä¿®æ”¹ postgres ç”¨æˆ·å¯†ç 
		ALTER USER postgres WITH PASSWORD 'ä½ çš„å¯†ç ';
		
		# ç„¶åç¼–è¾‘é…ç½®æ–‡ä»¶ /etc/postgresql/[pgsqlç‰ˆæœ¬å·]/main/pg_hba.confï¼Œå°†è®¤è¯æ–¹å¼æ”¹ä¸º md5
		# å°† local è¡Œçš„ peer æ”¹ä¸º md5
		local  all  postgres    md5
		
		# 6ã€å¼€å¯ PostgreSQL è¿œç¨‹è¿æ¥
		# æ‰“å¼€ /etc/postgresql/[pgsqlç‰ˆæœ¬å·]/main/postgresql.conf
		# å°† listen_addresses = 'localhost' 
		# ä¿®æ”¹ä¸º 
		# listen_addresses = '*' # å…è®¸æ‰€æœ‰IPè¿æ¥ æˆ– æŒ‡å®š IPè¿æ¥
		
		# 7ã€ä¿®æ”¹å®¢æˆ·ç«¯è®¤è¯é…ç½®
		# æ‰“å¼€ /etc/postgresql/[pgsqlç‰ˆæœ¬å·]/main/pg_hba.conf
		# åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ï¼š
		host  all  all  0.0.0.0/0  md5
		
		# 8ã€é‡å¯æœåŠ¡ç”Ÿæ•ˆ
		sudo systemctl restart postgresql
		

â€‹	2ã€å®‰è£… Dify

	# è¿›å…¥ Dify æºç çš„ Docker ç›®å½•
	cd dify/docker
	
	# èµ‹å€¼ç¯å¢ƒé…ç½®æ–‡ä»¶
	cp .env.example .env
	
	# å¯åŠ¨ Docker å®¹å™¨
		# å¦‚æœç‰ˆæœ¬æ˜¯ Docker Compose V2ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š
		sudo docker compose up -d 
		
		# å¦‚æœç‰ˆæœ¬æ˜¯ docker Compose V1ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š
		sudo docker-compose up -d 
		
		# è¿è¡Œå‘½ä»¤åï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„è¾“å‡ºï¼Œæ˜¾ç¤ºæ‰€æœ‰å®¹å™¨çš„çŠ¶æ€å’Œç«¯å£æ˜ å°„ï¼š
	  	âœ” Network docker_ssrf_proxy_network  Created     0.0s 
	  	âœ” Container dbim_dify_plugin_daemon  Started     0.5s 
	  	âœ” Container dbim_dify_web            Started     0.4s 
	  	âœ” Container dbim_dify_ssrf_proxy     Started     0.4s 
	  	â ¼ Container dbim_dify_redis          Starting    0.5s 
	  	âœ” Container dbim_dify_weaviate       Started     0.4s 
	  	âœ” Container dbim_dify_sandbox        Started     0.4s 
	  	âœ” Container dbim_dify_worker         Created     0.0s 
	  	âœ” Container dbim_dify_API            Created     0.0s 
	  	âœ” Container dbim_dify_nginx          Created     0.0s 
	  	
	 
	# æœ€åæ£€æŸ¥æ˜¯å¦æ‰€æœ‰å®¹å™¨éƒ½æ­£å¸¸è¿è¡Œï¼š
	docker compose ps
	

â€‹	3ã€è®¿é—®dify

```
	# ä½ å¯ä»¥å…ˆå‰å¾€ç®¡ç†åˆå§‹åŒ–è®¾ç½®é¡µé¢ï¼Œè®¾ç½®ç®¡ç†å‘˜è´¦æˆ·ï¼š
	# æ­¤ç®¡ç†å‘˜è´¦æˆ·æ‹¥æœ‰ dify ç³»ç»Ÿæ‰€æœ‰æœ€é«˜æƒé™åŠŸèƒ½
	
	# æœ¬åœ°ç¯å¢ƒè®¿é—®åœ°å€ï¼š
	http://localhost/install
	
	# æœåŠ¡å™¨ç¯å¢ƒè®¿é—®åœ°å€ï¼š
	http://your_server_ip/install
	
```

â€‹	4ã€Docker é•œåƒæ‹‰å–ä¸æˆåŠŸï¼š

```
# ç”±äºç½‘ç»œåŸå› ï¼Œdockeré•œåƒæ‹‰å»ä¸æˆåŠŸçš„æ¦‚ç‡æ¯”è¾ƒå¤§ï¼Œè¿™é‡Œå°±ä¸åšè¿‡å¤šè§£é‡Šï¼Œç›´æ¥åœ¨ç³»ç»Ÿé…ç½®ä»¥ä¸‹é•œåƒæºï¼Œæ‹‰å–é•œåƒæˆåŠŸçš„æ¦‚ç‡æ¯”è¾ƒå¤§ï¼Œé•œåƒæºå¦‚ä¸‹ï¼š

"https://docker.1ms.run",
"https://hub.rat.dev",
"https://docker.1panel.live",
"https://hub.rat.dev",
"https://proxy.1panel.live",
"https://ghcr.nju.edu.cn",
"https://docker.registry.cyou",
"https://dockercf.jsdelivr.fyi",
"https://docker.rainbond.cc",
"https://registry.cn-shenzhen.aliyuncs.com",
"https://dockertest.jsdelivr.fyi",
"https://mirror.aliyuncs.com",
"https://mirror.baidubce.com",
"https://docker.mirrors.ustc.edu.cn",
"https://docker.mirrors.sjtug.sjtu.edu.cn",
"https://mirror.iscas.ac.cn",
"https://docker.nju.edu.cn",
"https://docker.m.daocloud.io",
"https://dockerproxy.com",
"https://docker.jsdelivr.fyi",
"https://docker-cf.registry.cyou"
```

â€‹	5ã€ç³»ç»Ÿå¸¸ç”¨é…ç½®å‘½ä»¤

```
# ç³»ç»Ÿå¸¸ç”¨é…ç½®å‘½ä»¤ï¼š

# é‡è½½é…ç½®
sudo systemctl daemon-reload  

# é‡å¯æœåŠ¡ 
sudo systemctl restart docker 

# ç§»é™¤æ—§çš„ docker é…ç½®ï¼ˆç§»é™¤æ‰€æœ‰ docker é•œåƒï¼‰
docker-compose down 

# å¯åŠ¨æ‰€æœ‰ dify é…ç½®çš„é•œåƒ
docker-compose up -d 

# åœæ­¢ä½†ä¸åˆ é™¤
docker-compose stop <service_name>  

# åˆ é™¤å·²åœæ­¢çš„å®¹å™¨
docker-compose rm <service_name>    

# é‡æ–°æ„å»º web é¡¹ç›®
docker-compose build web 

```

â€‹	6ã€å®‰è£… php-7.2.33 åŠ ç›¸å…³æ‰©å±•

```
# æ³¨æ„è¦å®‰è£… php-7.2.33 çš„æ‰©å±•ï¼Œåˆ é™¤å…¶ä»–ç‰ˆæœ¬çš„phpï¼Œå¦åˆ™ pgsql é©±åŠ¨ä¼šæŠ¥æ‰¾ä¸åˆ° é©±åŠ¨ï¼š
# æ‰©å±•-1ï¼špgsql ï¼ˆéœ€æå‰å®‰è£… postgresql æ•°æ®åº“ï¼‰
# æ‰©å±•-2ï¼špdo-pgsql (éœ€æå‰å®‰è£… postgresql)
```

â€‹	7ã€æ–‡ä»¶éƒ¨ç½²

```
# éƒ¨ç½²å®Œæˆ Dify ä¹‹åï¼Œå°† livechat é¡¹ç›®ä¸­çš„ï¼š 
# dbim.livechat\application\seller\view\index\difylogin.html 
# æ–‡ä»¶ å¤åˆ¶åˆ° docker å®¹å™¨åç§°ä¸ºï¼šdbim_dify_web 
# ç›®å½•ï¼šapp\web\public ç›®å½•ä¸‹
# å®Œæˆä»¥ä¸Šæ“ä½œä¹‹åï¼Œéœ€è¦é‡å¯ dbim_dify_web å®¹å™¨ï¼Œé‡å¯å æ–‡ä»¶æ‰èƒ½è¢«åŠ è½½ç”Ÿæ•ˆ
```

â€‹	8ã€é˜²ç«å¢™è®¾ç½®

```
# å ¡å¡”é˜²ç«å¢™ é…ç½® å¼€æ”¾ 5432 æˆ– å½“å‰å ¡å¡” pgsql æ•°æ®åº“ä½¿ç”¨çš„ç«¯å£

```

â€‹	9ã€LiveChat é¡¹ç›®æ­å»º

```
# æŠŠæºç ä¸Šä¼ ï¼Œæ”¾åˆ°/www/wwwroot ç›®å½•ä¸‹
# å»ºè®®æ‚¨ é€šè¿‡å‘½ä»¤ï¼š
chow -R www:www ./AiService
# --è®¾ç½®æ–‡ä»¶çš„ æ‰€å±ä»¥åŠåˆ†ç»„ä¸º WWWï¼Œä»¥é¿å…æƒé™é—®é¢˜ã€‚

# æ·»åŠ ç½‘ç«™
# åœ¨å ¡å¡” ç½‘ç«™ç›®å½• - PHPé¡¹ç›® - æ·»åŠ phpç«™ç‚¹ï¼Œå°†livechat åˆ›å»ºä¸º php ç«™ç‚¹
```

<img src="README.assets/image-20250829135458454.png" alt="image-20250829135458454" style="zoom: 67%;float:left;" />

<img src="README.assets/image-20250829140214698.png" alt="image-20250829140214698" style="zoom:80%;float:left;" />

<img src="README.assets/image-20250829140358633.png" alt="image-20250829140358633" style="zoom:80%;float:left;" />

â€‹	10ã€æ•°æ®åº“é…ç½®

<img src="README.assets/image-20250829144731622.png" alt="image-20250829144731622" style="zoom:80%;float:left;" />

<img src="README.assets/image-20250829144925258.png" alt="image-20250829144925258" style="zoom:80%;float:left" />

<img src="README.assets/image-20250829145128350.png" alt="image-20250829145128350" style="zoom:80%;float:left;" />

â€‹	11ã€å¯åŠ¨ gatewayworker

```
# å¯åŠ¨ gatewayworker
php start.php start

# è¿™å‡ æ®µæ˜¯ debug æ¨¡å¼ å…¶ä»–å‘½ä»¤ï¼š
# debugæ‰§è¡Œ
php start.php start

# å®ˆæŠ¤è¿›ç¨‹æ‰§è¡Œ
php start.php start -d

# é‡å¯å®ˆæŠ¤è¿›ç¨‹æ‰§è¡Œ
php start.php retart -d

# åœæ­¢æ‰§è¡Œ
php start.php stop
```

â€‹	12ã€LiveChat é¡¹ç›®é…ç½®

```
# é…ç½®å®Œæˆåï¼Œç«™ç‚¹å…¥å£ï¼š
# å®˜ç½‘ï¼šhttp://yourservice_IP:ç«¯å£/
# DBIM AIæ™ºèƒ½å®¢æœç³»ç»Ÿï¼ˆå•†å®¶ç«¯ï¼‰:http://yourservice_IP:ç«¯å£/seller/login/index.html
# å®¢æœç³»ç»Ÿç®¡ç†åå°ï¼šhttp://yourservice_IP:ç«¯å£/admin/login/index.html
# DBIM AIæ™ºèƒ½å®¢æœå·¥ä½œå°ï¼šhttp://yourservice_IP:ç«¯å£/service/login/index
```

â€‹	13ã€ç³»ç»Ÿé…ç½®

<img src="README.assets/image-20250829152418565.png" alt="image-20250829152418565" style="zoom:80%;" />

<img src="README.assets/image-20250829152536709.png" alt="image-20250829152536709" style="zoom:80%;float:left;" />

<img src="README.assets/image-20250829153258183.png" alt="image-20250829153258183" style="zoom:50%;" /><img src="README.assets/image-20250829153318153.png" alt="image-20250829153318153" style="zoom:50%;float:left;" />



























